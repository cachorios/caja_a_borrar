CREATE TABLE LarParametro (id NUMBER(10) NOT NULL, tabla NUMBER(10) NOT NULL, codigo NUMBER(10) NOT NULL, tabla_padre NUMBER(10) DEFAULT NULL, codigo_padre NUMBER(10) DEFAULT NULL, descripcion CLOB NOT NULL, descripcion_corta VARCHAR2(10) DEFAULT NULL, alfanumerico VARCHAR2(64) DEFAULT NULL, agregable NUMBER(1) DEFAULT NULL, modificable NUMBER(1) DEFAULT NULL, sistema NUMBER(1) DEFAULT NULL, borrable NUMBER(1) DEFAULT NULL, activo NUMBER(1) DEFAULT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX tabla_idx ON LarParametro (tabla, codigo) USING INDEX TABLESPACE INDX00 ;
CREATE TABLE grupo (id NUMBER(10) NOT NULL, nombre VARCHAR2(30) NOT NULL, role VARCHAR2(30) NOT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_8C0E9BD33A909126 ON grupo (nombre) USING INDEX TABLESPACE INDX00;
CREATE UNIQUE INDEX UNIQ_8C0E9BD357698A6A ON grupo (role) USING INDEX TABLESPACE INDX00;
CREATE TABLE HorarioIngreso (id NUMBER(10) NOT NULL, descripcion VARCHAR2(32) NOT NULL, desde VARCHAR2(8) NOT NULL, hasta VARCHAR2(8) NOT NULL, PRIMARY KEY(id));
CREATE TABLE LogIngreso (id NUMBER(10) NOT NULL, usuario_id NUMBER(10) DEFAULT NULL, descripcion VARCHAR2(256) NOT NULL, ip VARCHAR2(16) NOT NULL, fecha TIMESTAMP(0) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_A0B2AA72DB38439E ON LogIngreso (usuario_id) USING INDEX TABLESPACE INDX00;
CREATE TABLE LugarIngreso (id NUMBER(10) NOT NULL, descripcion VARCHAR2(64) NOT NULL, mascara VARCHAR2(32) DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE Usuario (id NUMBER(10) NOT NULL, usuario_ingreso_id NUMBER(10) DEFAULT NULL, nombre VARCHAR2(32) NOT NULL, apellido VARCHAR2(32) NOT NULL, email VARCHAR2(96) NOT NULL, password VARCHAR2(255) NOT NULL, username VARCHAR2(128) NOT NULL, salt VARCHAR2(255) NOT NULL, direccion CLOB NOT NULL, permite_email NUMBER(1) NOT NULL, is_active NUMBER(1) NOT NULL, is_deleted NUMBER(1) NOT NULL, fecha_alta TIMESTAMP(0) NOT NULL, fecha_nacimiento TIMESTAMP(0) NOT NULL, dni VARCHAR2(9) NOT NULL, foto VARCHAR2(255) DEFAULT NULL, contenedor CLOB DEFAULT NULL, ultimo_ingreso TIMESTAMP(0) DEFAULT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_EDD889C1E7927C74 ON Usuario (email) USING INDEX TABLESPACE INDX00;
CREATE UNIQUE INDEX UNIQ_EDD889C1143EC079 ON Usuario (usuario_ingreso_id) USING INDEX TABLESPACE INDX00;
COMMENT ON COLUMN Usuario.contenedor IS '(DC2Type:array)';
CREATE TABLE usuario_grupo (usuario_id NUMBER(10) NOT NULL, grupo_id NUMBER(10) NOT NULL, PRIMARY KEY(usuario_id, grupo_id));
CREATE INDEX IDX_91D0F1CDDB38439E ON usuario_grupo (usuario_id) USING INDEX TABLESPACE INDX00;
CREATE INDEX IDX_91D0F1CD9C833003 ON usuario_grupo (grupo_id) USING INDEX TABLESPACE INDX00;
CREATE TABLE UsuarioIngreso (id NUMBER(10) NOT NULL, usuario_id NUMBER(10) DEFAULT NULL, horario_id NUMBER(10) DEFAULT NULL, lunes NUMBER(1) NOT NULL, martes NUMBER(1) NOT NULL, miercoles NUMBER(1) NOT NULL, jueves NUMBER(1) NOT NULL, viernes NUMBER(1) NOT NULL, sabado NUMBER(1) NOT NULL, domingo NUMBER(1) NOT NULL, lugar_ingreso NUMBER(1) NOT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_CD6361D1DB38439E ON UsuarioIngreso (usuario_id) USING INDEX TABLESPACE INDX00;
CREATE INDEX IDX_CD6361D14959F1BA ON UsuarioIngreso (horario_id) USING INDEX TABLESPACE INDX00;
CREATE TABLE Apertura (id NUMBER(10) NOT NULL, caja_id NUMBER(10) DEFAULT NULL, fecha TIMESTAMP(0) NOT NULL, importe_inicial NUMERIC(10, 0) NOT NULL, fecha_cierre TIMESTAMP(0) DEFAULT NULL, direccion_ip VARCHAR2(15) DEFAULT NULL, host VARCHAR2(32) DEFAULT NULL, archivo_cierre VARCHAR2(32) DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_268D37BD2D82B651 ON Apertura (caja_id) USING INDEX TABLESPACE INDX00;
CREATE TABLE BarraDetalle (id NUMBER(10) NOT NULL, codigobarra_id NUMBER(10) DEFAULT NULL, descripcion VARCHAR2(64) NOT NULL, posicion NUMBER(10) NOT NULL, longitud NUMBER(10) NOT NULL, tabla NUMBER(10) DEFAULT NULL, estado NUMBER(5) DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_D49722F9D8C5015E ON BarraDetalle (codigobarra_id) USING INDEX TABLESPACE INDX00;
CREATE TABLE sca_caja (id NUMBER(10) NOT NULL, cajero_id NUMBER(10) DEFAULT NULL, numero NUMBER(10) NOT NULL, nombre VARCHAR2(64) NOT NULL, ubicacion VARCHAR2(39) NOT NULL, puerto VARCHAR2(10) NOT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_4169B09E910ECC70 ON sca_caja (cajero_id) USING INDEX TABLESPACE INDX00;
CREATE TABLE CierreCaja (id NUMBER(10) NOT NULL, fecha DATE NOT NULL, importe NUMERIC(10, 0) NOT NULL, fecha_cierre TIMESTAMP(0) NOT NULL, direccion_ip VARCHAR2(15) NOT NULL, host VARCHAR2(32) NOT NULL, cajero VARCHAR2(32) NOT NULL, nro_caja NUMBER(10) NOT NULL, PRIMARY KEY(id));
CREATE TABLE CodigoBarra (id NUMBER(10) NOT NULL, nombre VARCHAR2(64) NOT NULL, empresa VARCHAR2(64) NOT NULL, longitud NUMBER(10) NOT NULL, identificador VARCHAR2(64) NOT NULL, valor VARCHAR2(64) NOT NULL, observacion CLOB DEFAULT NULL, conReferencia NUMBER(1) NOT NULL, PRIMARY KEY(id));
CREATE TABLE Feriado (id NUMBER(10) NOT NULL, fecha DATE NOT NULL, descripcion VARCHAR2(32) NOT NULL, observacion VARCHAR2(255) DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE Lote (id NUMBER(10) NOT NULL, apertura_id NUMBER(10) DEFAULT NULL, fecha TIMESTAMP(0) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_C5869DA12E55782B ON Lote (apertura_id) USING INDEX TABLESPACE INDX00;
CREATE TABLE LoteAnulacion (id NUMBER(10) NOT NULL, usuario_id NUMBER(10) DEFAULT NULL, fecha TIMESTAMP(0) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_44F62B06DB38439E ON LoteAnulacion (usuario_id) USING INDEX TABLESPACE INDX00;
CREATE TABLE LoteAnulacionDetalle (id NUMBER(10) NOT NULL, lote_id NUMBER(10) DEFAULT NULL, detalle_id NUMBER(10) DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_923DEFF4B172197C ON LoteAnulacionDetalle (lote_id) USING INDEX TABLESPACE INDX00;
CREATE INDEX IDX_923DEFF49EA59ED2 ON LoteAnulacionDetalle (detalle_id) USING INDEX TABLESPACE INDX00;
CREATE TABLE LoteDetalle (id NUMBER(10) NOT NULL, lote_id NUMBER(10) DEFAULT NULL, codigo_barra VARCHAR2(255) NOT NULL, comprobante VARCHAR2(20) NOT NULL, fecha TIMESTAMP(0) NOT NULL, importe NUMERIC(15, 2) NOT NULL, anulado NUMBER(1) NOT NULL, seccion NUMBER(10) NOT NULL, referencia VARCHAR2(255) DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_7095C3EDB172197C ON LoteDetalle (lote_id) USING INDEX TABLESPACE INDX00;
CREATE TABLE LotePago (id NUMBER(10) NOT NULL, lote_id NUMBER(10) DEFAULT NULL, tipo_pago_id NUMBER(10) DEFAULT NULL, fecha TIMESTAMP(0) NOT NULL, importe NUMERIC(15, 2) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_D226AC31B172197C ON LotePago (lote_id) USING INDEX TABLESPACE INDX00;
CREATE INDEX IDX_D226AC317002A220 ON LotePago (tipo_pago_id) USING INDEX TABLESPACE INDX00;
CREATE TABLE Responsable (id NUMBER(10) NOT NULL, descripcion VARCHAR2(64) NOT NULL, email VARCHAR2(96) NOT NULL, detalle NUMBER(1) DEFAULT NULL, resumen NUMBER(1) DEFAULT NULL, activo NUMBER(1) DEFAULT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_D4CE82D0E7927C74 ON Responsable (email) USING INDEX TABLESPACE INDX00;
CREATE TABLE TipoPago (id NUMBER(10) NOT NULL, descripcion VARCHAR2(32) NOT NULL, observacion VARCHAR2(255) DEFAULT NULL, divisible NUMBER(1) DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE VtoImporteCodigoBarra (id NUMBER(10) NOT NULL, codigobarra_id NUMBER(10) DEFAULT NULL, orden NUMBER(5) NOT NULL, vencimiento VARCHAR2(64) NOT NULL, importe VARCHAR2(64) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_4D0619D3D8C5015E ON VtoImporteCodigoBarra (codigobarra_id) USING INDEX TABLESPACE INDX00;
CREATE TABLE Auditoria (id NUMBER(10) NOT NULL, fecha DATE NOT NULL, usuario VARCHAR2(255) NOT NULL, accion VARCHAR2(255) NOT NULL, PRIMARY KEY(id));
CREATE SEQUENCE LarParametro_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE grupo_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE HorarioIngreso_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE LogIngreso_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE LugarIngreso_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE Usuario_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE UsuarioIngreso_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE Apertura_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE BarraDetalle_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE sca_caja_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE CierreCaja_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE CodigoBarra_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE Feriado_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE Lote_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE LoteAnulacion_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE LoteAnulacionDetalle_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE LoteDetalle_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE LotePago_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE Responsable_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE TipoPago_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE VtoImporteCodigoBarra_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
CREATE SEQUENCE Auditoria_id_seq START WITH 1 MINVALUE 1 INCREMENT BY 1;
ALTER TABLE LogIngreso ADD CONSTRAINT FK_A0B2AA72DB38439E FOREIGN KEY (usuario_id) REFERENCES Usuario (id);
ALTER TABLE Usuario ADD CONSTRAINT FK_EDD889C1143EC079 FOREIGN KEY (usuario_ingreso_id) REFERENCES UsuarioIngreso (id);
ALTER TABLE usuario_grupo ADD CONSTRAINT FK_91D0F1CDDB38439E FOREIGN KEY (usuario_id) REFERENCES Usuario (id) ON DELETE CASCADE;
ALTER TABLE usuario_grupo ADD CONSTRAINT FK_91D0F1CD9C833003 FOREIGN KEY (grupo_id) REFERENCES grupo (id) ON DELETE CASCADE;
ALTER TABLE UsuarioIngreso ADD CONSTRAINT FK_CD6361D1DB38439E FOREIGN KEY (usuario_id) REFERENCES Usuario (id);
ALTER TABLE UsuarioIngreso ADD CONSTRAINT FK_CD6361D14959F1BA FOREIGN KEY (horario_id) REFERENCES HorarioIngreso (id);
ALTER TABLE Apertura ADD CONSTRAINT FK_268D37BD2D82B651 FOREIGN KEY (caja_id) REFERENCES sca_caja (id);
ALTER TABLE BarraDetalle ADD CONSTRAINT FK_D49722F9D8C5015E FOREIGN KEY (codigobarra_id) REFERENCES CodigoBarra (id);
ALTER TABLE sca_caja ADD CONSTRAINT FK_4169B09E910ECC70 FOREIGN KEY (cajero_id) REFERENCES Usuario (id);
ALTER TABLE Lote ADD CONSTRAINT FK_C5869DA12E55782B FOREIGN KEY (apertura_id) REFERENCES Apertura (id);
ALTER TABLE LoteAnulacion ADD CONSTRAINT FK_44F62B06DB38439E FOREIGN KEY (usuario_id) REFERENCES Usuario (id);
ALTER TABLE LoteAnulacionDetalle ADD CONSTRAINT FK_923DEFF4B172197C FOREIGN KEY (lote_id) REFERENCES LoteAnulacion (id);
ALTER TABLE LoteAnulacionDetalle ADD CONSTRAINT FK_923DEFF49EA59ED2 FOREIGN KEY (detalle_id) REFERENCES LoteDetalle (id);
ALTER TABLE LoteDetalle ADD CONSTRAINT FK_7095C3EDB172197C FOREIGN KEY (lote_id) REFERENCES Lote (id);
ALTER TABLE LotePago ADD CONSTRAINT FK_D226AC31B172197C FOREIGN KEY (lote_id) REFERENCES Lote (id);
ALTER TABLE LotePago ADD CONSTRAINT FK_D226AC317002A220 FOREIGN KEY (tipo_pago_id) REFERENCES TipoPago (id);
ALTER TABLE VtoImporteCodigoBarra ADD CONSTRAINT FK_4D0619D3D8C5015E FOREIGN KEY (codigobarra_id) REFERENCES CodigoBarra (id);
